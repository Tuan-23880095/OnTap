<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Ôn Tập - HCMUS Style</title>
    <style>
        :root {
            --primary: #005a8d;
            --accent: #f39c12;
            --light-bg: #f8f9fa;
            --border-color: #ddd;
        }
        body { display: flex; flex-direction: column; min-height: 100vh; background-color: var(--light-bg); font-family: 'Segoe UI', sans-serif; margin: 0; }
        
        /* HEADER */
        header { background-color: #fff; border-bottom: 4px solid var(--primary); padding: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; gap: 20px; }
        .logo { height: 80px; width: auto; }
        .header-text h1 { color: var(--primary); font-size: 1.8rem; margin: 0; text-transform: uppercase; font-weight: 700; }
        .header-text p { color: #666; margin: 5px 0 0 0; font-size: 1rem; }

        /* BODY */
        .main-body { flex: 1; max-width: 1200px; width: 100%; margin: 40px auto; padding: 0 20px; box-sizing: border-box; }
        .domain-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        .domain-card { background: #fff; border-radius: 8px; border: 1px solid var(--border-color); overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); transition: transform 0.3s ease; }
        .domain-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px rgba(0,0,0,0.1); }
        .domain-header { background-color: var(--primary); color: #fff; padding: 15px 20px; display: flex; align-items: center; gap: 10px; }
        .domain-title { margin: 0; font-size: 1.2rem; font-weight: 600; }
        .domain-content { padding: 20px; }

        .subject-item { border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px; }
        .subject-item:last-child { border-bottom: none; margin-bottom: 0; }
        .subject-title { color: var(--primary); font-size: 1.1rem; margin: 0 0 10px 0; font-weight: bold; }
        
        .exam-link { display: block; padding: 8px 12px; background-color: #f1f5f9; margin-bottom: 5px; border-radius: 4px; text-decoration: none; color: #333; font-size: 0.9rem; transition: background 0.2s; border-left: 3px solid transparent; }
        .exam-link:hover { background-color: #e2e8f0; border-left-color: var(--accent); color: var(--primary); }
        .empty-msg { color: #999; font-style: italic; font-size: 0.9rem; }

        /* FOOTER */
        footer { background-color: var(--primary); color: #fff; text-align: center; padding: 20px 0; margin-top: auto; border-top: 5px solid var(--accent); }
    </style>
</head>
<body>

<header>
    <div class="header-container">
        <img src="https://bdvh.hcmus.edu.vn/images/logo2_bdvh.jpg" alt="Logo BDVH HCMUS" class="logo">
        <div class="header-text">
            <h1>HỆ THỐNG ÔN TẬP</h1>
            <p>Ngân hàng đề thi trực tuyến - Trung tâm Bồi dưỡng Văn hóa</p>
        </div>
    </div>
</header>

<div class="main-body">
    <div class="domain-grid" id="app-content">
        <div style="width: 100%; text-align: center; padding: 50px;">Đang tải dữ liệu...</div>
    </div>
</div>

<footer>
    <div class="container">
        <p><strong>Tác giả: ThS. Đinh Quốc Tuấn</strong> - ĐH Khoa học Tự nhiên, ĐHQG-HCM</p>
        <p>Bản quyền thuộc về Đinh Quốc Tuấn &copy; 2025</p>
    </div>
</footer>

<!-- IMPORT SCRIPTS -->
<script src="app.js"></script>
<script src="data.js"></script>

<script>
    // Hàm render giao diện dựa trên database từ data.js
    function renderApp() {
        const container = document.getElementById('app-content');
        container.innerHTML = '';

        if (typeof database === 'undefined' || !database) {
            container.innerHTML = '<div style="color:red; text-align:center;">Lỗi: Không tìm thấy dữ liệu (database). Kiểm tra file data.js</div>';
            return;
        }

        database.forEach(domain => {
            const card = document.createElement('div');
            card.className = 'domain-card';

            const header = document.createElement('div');
            header.className = 'domain-header';
            header.innerHTML = `<span class="domain-icon">${domain.icon}</span><h3 class="domain-title">${domain.name}</h3>`;
            card.appendChild(header);

            const content = document.createElement('div');
            content.className = 'domain-content';

            if(domain.subjects.length === 0) {
                content.innerHTML = '<div class="empty-msg">Chưa có môn học nào.</div>';
            } else {
                domain.subjects.forEach(sub => {
                    const subDiv = document.createElement('div');
                    subDiv.className = 'subject-item';

                    const subTitle = document.createElement('div');
                    subTitle.className = 'subject-title';
                    subTitle.innerHTML = `${sub.name} <span style="font-weight:normal; font-size:0.8em; color:#777">(${sub.exams.length})</span>`;
                    subDiv.appendChild(subTitle);

                    const examList = document.createElement('div');
                    if (sub.exams.length === 0) {
                        examList.innerHTML = '<div class="empty-msg">Đang cập nhật đề...</div>';
                    } else {
                        sub.exams.forEach(exam => {
                            const link = document.createElement('a');
                            link.href = exam.getUrl(sub.folder); // Tạo link: folder/filename
                            link.className = 'exam-link';
                            link.innerHTML = `${exam.title} <span style="float:right; font-size:0.8em; color:#666">${exam.time}</span>`;
                            examList.appendChild(link);
                        });
                    }
                    subDiv.appendChild(examList);
                    content.appendChild(subDiv);
                });
            }
            card.appendChild(content);
            container.appendChild(card);
        });
    }

    document.addEventListener('DOMContentLoaded', renderApp);
</script>

</body>
</html>
